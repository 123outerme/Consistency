<!doctype HTML>
<html>
  <head>
  <meta charset="utf-8"/>
    <meta name="author" content="Stephen Policelli">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Consistency</title>
    <link rel = "stylesheet"
     type = "text/css"
     href = "gtl-style.css" />
	<link rel="icon" type="image/ico" href="favicon.ico">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
	<script>
		var cardList = [""];
		var tempCardList = [""];
		var arrayDisp = 1;
		var goodHands = 0;
		var badHands = 0;
		function testHand() {
			var handSize = document.getElementById("HandSize").value;
			if (cardList.length >= handSize)
			{
				tempCardList = cardList.slice(); //duplicate array
				shuffleArray(tempCardList);
				document.getElementById("TestHand").innerHTML = "";
				for(i = 0; i < handSize; i++)
					document.getElementById("TestHand").innerHTML += "<li>" + tempCardList[i] + "</li>";
			}
			else
				document.getElementById("TestHand").innerHTML = "<li>Error: Not enough cards in deck.</li>";
		}
		function shuffleArray(array) {
  	 		for (var i = array.length - 1; i > 0; i--) {
				var j = Math.floor(Math.random() * (i + 1));
				var temp = array[i];
    	   	 	array[i] = array[j];
    	   	 	array[j] = temp;
   	 		}
		}
		function addToList() {
			cardList[cardList.length - arrayDisp] = document.getElementById("CardName").value;
			document.getElementById("DeckList").innerHTML += "<li>" + cardList[cardList.length - 1] + " :: <input type='submit' value='Remove' onclick='removeItem(" + (cardList.length - 1) + ")'></li>";
			if (arrayDisp != 0)
				arrayDisp = 0;
		}
		function removeItem(item) {
			cardList.splice(item, 1);
			document.getElementById("DeckList").innerHTML = "";
			for(i = 0; i < cardList.length; i++)
				document.getElementById("DeckList").innerHTML += "<li>" + cardList[i] + " :: <input type='submit' value='Remove' onclick='removeItem(" + (i) + ")'></li>";
		}
		function handRating(rating) {
			if (rating > 0)
			{
				goodHands += rating;
				document.getElementById("GoodHandNum").innerHTML = goodHands;
			}
			else
			{
				badHands -= rating;
				document.getElementById("BadHandNum").innerHTML = badHands;
			}
			document.getElementById("TotalTestNum").innerHTML = goodHands + badHands;
			document.getElementById("BrickRatio").innerHTML = (badHands / (goodHands + badHands)) * 100.0;
			testHand();
		}
	</script>
  </head>
  <body>
	<h1 width="10%">Consistency</h1>
	  <form class="center" onsubmit="return false;">
<input type="text" id="CardName" placeholder="Card name"><br>
<input type="number" id="HandSize" min="4" max="6" placeholder="Hand Size">
<input type="submit" value="Add Card" size="4" onclick="addToList();">
<input type="submit" value="Start Testing" size="4" onclick="testHand();">
</form>
	<br />
	  <h2>Test Hand</h2>
	  <ol id="TestHand"></ol>
	  <p><input type="submit" value="Good" size="4" onclick="handRating(1);"> | <input type="submit" value="Brick" size="4" onclick="handRating(-1);"><br />
		  [Good: <span id="GoodHandNum"></span>] | [Bad: <span id="BadHandNum"></span>]</p>
		  <p>{Total: <span id="TotalTestNum"></span>} | {Brick Ratio: <span id="BrickRatio"></span>%}</p>
	  <h2>Decklist</h2>
	  <ol id="DeckList"></ol>
	</span>
  </body>
</html>
